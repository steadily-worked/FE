# HTTP

웹 브라우저와 웹 서버가 통신할 때 사용하는 통신규칙 - HTTP
HTTP - HyperText Transfer Protocol
WWW - World Wide Web

Client가 Server에게 물건을(HTML)을 달라고 요청(Request)하고, '여깄습니다' 하고 주는 행위(Response)로 이뤄져 있다. 즉 HTTP는 크게 Request와 Response라는 두 개로 이뤄져 있다고 볼 수 있다.

## HTTP - Request Message

### Request Line: Request Headers의 첫 번째 행

ex) GET /1.html HTTP/1.1
GET -> 데이터를 웹서버로부터 가져올 때 쓰는 방법
/1.html -> 이를 보고 웹 브라우저가 요청한 정보를 웹 서버가 응답함.
HTTP/1.1 -> 웹브라우저가 현재 사용하고 있는 / 사용할 수 있는 HTTP 버전

### Request Header: Host부터 Referer까지.

- 그 중에서 반드시 적어야 되는 것: Host. 컴퓨터 한 대 한 대를 식별하는 호스트.
- ex) HOST: localhost:8080
- 하나의 웹서버가 여러개의 도메인을 서비스할 수 있다. ex) a라는 웹서버가 a.com, b.com 등을 호스팅하고 있고 각각의 주소별로 다른 웹사이트가 연결되어있다면 웹서버는 localhost가 무엇인가에 따라서 다른 정보를 보여줄 수 있다.
- localhost뒤에 8080은 포트(Port)라고 한다. 한 컴퓨터는 여러 개의 서버를 가질 수 있는데, 8080이라는 것은 그 많은 서버들 중 하나의 번호이다.
- User-Agent: 웹 브라우저의 다른 표현. 요청하는 웹 브라우저가 어떤 웹 브라우저인지를 보여준다.

- Accept-Encoding: 웹 브라우저와 웹 서버가 통신할 때 주고 받는 데이터가 많으면 이를 압축해서 전송할 경우 웹 브라우저가 압축을 풀어서 처리할 수 있다. 이럴 경우 네트워크의 자원을 아낄 수 있다. 이 웹 브라우저는 어떤 압축 방식을 지원하고 있는 지 알려준다.
- If-Modified-Since: 요청할 때마다 다운로드받는건 비효율적이다. 이 때, 이 정보를 서버에게 전송한다는 것은 '내가 갖고 있는 이 파일은 마지막으로 언제 다운로드받은 파일이다'를 웹 서버에게 알려준다. 그럼 웹 서버는 응답할 때 자신이 갖고 있는 파일과 뭐가 더 최신인지를 비교한 후 자신의 것이 최신이면 전송해주고 아니면 전송하지 않는다. 즉 최근에 다운로드 받은 시각을 알려주는 것이다.

### Response Header

- Content-type: 웹 서버가 응답할 때 응답하는 타입. HTML의 경우 text/html, 이미지면 image/jpeg(확장자명)
- Content-Length: 응답하는 것의 전체 크기(size). 단위는 Byte이다.
- Content-Encoding: 압축한 방식. (gzip 등이 있음)
- Last-Modified: 마지막으로 언제 수정되었는지

### 종합

- 웹 브라우저와 웹 서버가 커뮤니케이션 하는 과정은

1. 웹 브라우저는 요청하기 전에 HOST부터 시작하는 Request Header의 정보를 웹 서버에 보내준다. 추가할 내용이 있다면 한 칸 띄우고 그 보낼 내용을 적는다.
2. 메시지를 만든 다음에 인터넷을 통해 웹 서버에게 보내주면 웹 서버는 이를 해석한 후 Response Headers를 만든다. (Content-type까지의 내용) 한 칸 띄우고, 실제 HTML 코드를 넣는다.
3. 이 내용 전체를, 역시나 인터넷을 통해서 요청한 컴퓨터로 보내주면 웹 브라우저는 Response Headers와 HTML 코드를 파악한 후 보여주는 방식이다.

### HTTP와 HTTPS의 차이?

- http://와 https://(=SSL) 의 차이이다. HTTPS의 S는 Secure의 약자이다.
  사람들은 처음에 웹이 등장했을 때 그렇게 심각한 정보의 이동이 없었으나 근래에 그런 정보의 이동이 많아졌고, 그에 따라 보안의 중요성이 대두되었다. HTTPS의 경우, 정보를 보내는 중간에 누군가가 가로채더라도 보낸 자와 당사자만이 확인할 수 있게끔 암호화되어 있다.

- 웹에 대한 소비자라면, HTTPS가 아닌 페이지에서 로그인을 요구할 경우 하면 안 된다.

### 캐시(Cache)

- 한 번 웹사이트에 접속해서 그 내용을 다운로드 받았다면, 또 접속했을 때 다시 다운로드를 받을 필요는 없을 것이다. 이미 저장되어 있는 내용을 불러옴으로써 성능을 향상시킬 수 있는 방법이 캐시이다.
- but, 내용이 갱신됐을 때 브라우저가 일을 알아차리지 못한다는 문제가 있다. 이 때 MacOS의 경우 커맨드 + R을 누르면 갱신할 수 있다.

### 쿠키(Cookie)

- 쿠키 값을 웹 브라우저에 설정하면, 접속할 때마다 그 설정됐던 쿠키값을 서버에 전송하는 것을 통해 사용자의 상태를 유지하고 사용자를 식별할 수 있다.
- 최근에는 쿠키보다 훨씬 더 많은 정보를 저장하면서도 보안적으로 보다 우수한 web storage가 있다.

### 프록시(proxy)

- 웹 서버와 웹 브라우저 사이에 프록시라고 불리는 중개 서버를 둘 수 있다. 중간에 있는 서버가 캐시를 대신해주거나 보안과 관련된 공격을 막아주거나, 적당히 사용자의 요청을 여러 대의 서비스로 분산해주는 것과 같은 기능을 프록시 서버가 해줄 수 있다.

### 네트워크 모니터링 도구

- 크롬 개발자 도구 -> Network. 매우 간편
- 와이커샤크(wireshark): 오픈소스이고, 무료이면서 가장 강력한 기능을 갖고 있음. 모든 트래픽을 감시할 수 있음
